<!DOCTYPE html>
<html lang="uk">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/CSS" href="style-calculator.css">
        <title>Calculator</title>
    </head>
    <body>
        <div class="calculator">
            <div>
                <input type="text" id="num1" placeholder="Число 1">
                <input type="text" id="operator" placeholder="Оператор">
                <input type="text" id="num2" placeholder="Число 2">
            </div>
            <div>
                <button onclick="calculate()">Розрахувати</button>
            </div>
            <div class="keyboard">
                <div>
                    <button onclick="addToInput('1')">1</button>
                    <button onclick="addToInput('2')">2</button>
                    <button onclick="addToInput('3')">3</button>
                    <button onclick="setOperator('+')">+</button>
                </div>
                <div>
                    <button onclick="addToInput('4')">4</button>
                    <button onclick="addToInput('5')">5</button>
                    <button onclick="addToInput('6')">6</button>
                    <button onclick="setOperator('-')">-</button>
                </div>
                <div>
                    <button onclick="addToInput('7')">7</button>
                    <button onclick="addToInput('8')">8</button>
                    <button onclick="addToInput('9')">9</button>
                    <button onclick="setOperator('*')">*</button>
                </div>
                <div>
                    <button onclick="addToInput('0')">0</button>
                    <button onclick="setOperator('/')">/</button>
                </div>
            </div>
        </div>

        <script>
            window.onload = function() {
            document.getElementById('num1').focus();
            };

            let activeElement = document.getElementById('num1');
            
            let calculatorData = {
                num1: '',
                num2: '',
                operator: ''
            };

            document.getElementById('num1').addEventListener('input', (e) => {
                calculatorData.num1 = e.target.value;
            });

            document.getElementById('num2').addEventListener('input', (e) => {
                calculatorData.num2 = e.target.value;
            });

            document.getElementById('operator').addEventListener('input', (e) => {
                calculatorData.operator = e.target.value;
            });

            function addToInput(value) {
                document.getElementById(activeElement.id).focus
                let focusedElement = document.getElementById(activeElement.id);
                console.log(focusedElement.id)
                if (focusedElement.id === 'num1' || focusedElement.id === 'num2') {
                    focusedElement.value += value;
                    focusedElement.dispatchEvent(new Event('input'));
                }
                document.getElementById(activeElement.id).focus
            }

            function setOperator(operator) {
                document.getElementById('operator').value = operator;
                document.getElementById('operator').dispatchEvent(new Event('input'));
                activeElement = document.getElementById('num2');
                document.getElementById('num2').focus();
            }

            function calculate() {
                const { num1, num2, operator } = calculatorData;

                if (!num1 || !num2 || !operator) {
                    alert('Введіть обидва числа та оператор.');
                    return;
                }

                let result;
                const number1 = parseFloat(num1);
                const number2 = parseFloat(num2);

                if (isNaN(number1) || isNaN(number2)) {
                    alert('Введені значення повинні бути числами.');
                    return;
                }

                switch (operator) {
                    case '+':
                        result = number1 + number2;
                        break;
                    case '-':
                        result = number1 - number2;
                        break;
                    case '*':
                        result = number1 * number2;
                        break;
                    case '/':
                        if (number2 === 0) {
                            alert('Ділення на нуль неможливе.');
                            return;
                        }
                        result = number1 / number2;
                        break;
                    default:
                        alert('Невірний оператор.');
                        return;
                }

                alert('Результат: ' + result);

                calculatorData.num1 = '';
                calculatorData.num2 = '';
                calculatorData.operator = '';

                document.getElementById('num1').value = '';
                document.getElementById('num2').value = '';
                document.getElementById('operator').value = '';

                activeElement = document.getElementById('num1');
                document.getElementById('num1').focus();
            }
        </script>
    </body>
</html>